{% extends 'base.html' %}
{% load static %}
{% block title %}Registrar Novo Empréstimo{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/register_loan.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        /* Ajuste do Select2 para tema escuro */
        .select2-container .select2-selection--single {
            height: 45px;
            background-color: #2a2a4a;
            border: 1px solid #444;
            color: #e0e0e0;
        }
        .select2-container--default .select2-selection--single .select2-selection__rendered {
            color: #e0e0e0;
            line-height: 45px;
        }
        .select2-dropdown {
            background-color: #1f1f3a;
            border: 1px solid #444;
            color: #e0e0e0;
        }
        .select2-results__option--highlighted {
            background-color: #8e2de2 !important;
        }
    </style>
{% endblock %}

{% block content %}
<div class="register-loan-container">
    <h1>Registrar Novo Empréstimo</h1>
    <div class="loan-form-card">
        <form id="loanForm">
            <div class="form-group full-width">
                <label for="toolSelect">Ferramenta</label>
                <select id="toolSelect" name="tool" required style="width: 100%;">
                    <option value="">Selecione uma ferramenta</option>
                </select>
            </div>
            
            <div class="form-group full-width">
                <label for="employeeSelect">Destinatário (Funcionário)</label>
                <select id="employeeSelect" name="employee" required style="width: 100%;">
                    <option value="">Busque por nome ou matrícula...</option>
                </select>
                <small style="color: #a0a0b0; display: block; margin-top: 5px;">
                    Não encontrou? <a href="/manage-employees/" style="color: #8e2de2;">Cadastrar novo funcionário</a>
                </small>
            </div>

            <div class="form-group">
                <label for="quantity">Quantidade</label>
                <input type="number" id="quantity" name="quantity" min="1" value="1" required>
            </div>
             <div class="form-group">
                <label for="borrowedDate">Data do Empréstimo</label>
                <input type="date" id="borrowedDate" name="borrowed_date" readonly>
            </div>
            <div class="form-group">
                <label for="dueDate">Data de Devolução Prevista</label>
                <input type="date" id="dueDate" name="due_date" required>
            </div>
            
            <button type="submit">Registrar Empréstimo</button>
            <div id="message" class="message"></div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script type="module" src="{% static 'js/register_loan.js' %}"></script>
{% endblock %}