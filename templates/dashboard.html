{% extends 'base.html' %}
{% load static %}
{% block title %}Dashboard{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}
{% block content %}
<div class="dashboard-container">
    <h1>Dashboard</h1>

    <div id="overdue-alert" class="alert-section" style="display: none;">
        <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <div>
                <h4>Alerta de Empréstimos Atrasados!</h4>
                <p>Verifique <strong><span id="overdue-loans-count-alert">0</span></strong> ferramenta(s) com devolução atrasada. <a href="/active-overdue-loans">Verificar agora</a></p>
            </div>
        </div>
    </div>

    <div class="dashboard-cards">
        <div class="card">
            <div class="card-icon"><i class="fas fa-boxes"></i></div>
            <div class="card-content">
                <h3>Total de Tipos de Ferramentas</h3>
                <p><span id="total-tool-types">0</span> tipos cadastrados</p>
            </div>
        </div>
        <div class="card">
            <div class="card-icon"><i class="fas fa-handshake"></i></div>
            <div class="card-content">
                <h3>Empréstimos Ativos</h3>
                <p><span id="active-loans-count">0</span> ferramentas emprestadas</p>
            </div>
        </div>

        <div class="card" id="overdue-card">
            <div class="card-icon"><i class="fas fa-calendar-times"></i></div>
            <div class="card-content">
                <h3>Empréstimos Atrasados</h3>
                <p><span id="overdue-loans-count">0</span> requerem atenção imediata</p>
            </div>
        </div>

        <div class="card">
            <div class="card-icon"><i class="fas fa-warehouse"></i></div>
            <div class="card-content">
                <h3>Disponível no Armazém</h3>
                <p><span id="available-in-warehouse">0</span> itens para empréstimo</p>
            </div>
        </div>
        <div class="card">
            <div class="card-icon"><i class="fas fa-wrench"></i></div>
            <div class="card-content">
                <h3>Ferramentas em Manutenção</h3>
                <p><span id="tools-in-maintenance">0</span> unidades em manutenção</p>
            </div>
        </div>
        <div class="card">
            <div class="card-icon"><i class="fas fa-dollar-sign"></i></div>
            <div class="card-content">
                <h3>Custo Total de Manutenção</h3>
                <p>R$ <span id="total-maintenance-cost">0,00</span></p>
                <p class="sub-info">valor total das manutenções</p>
            </div>
        </div>
        <div class="card">
            <div class="card-icon"><i class="fas fa-money-bill-wave"></i></div>
            <div class="card-content">
                <h3>Valor Total do Inventário</h3>
                <p>R$ <span id="total-inventory-value">0,00</span></p>
                <p class="sub-info">soma do valor de todas as ferramentas</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script type="module" src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}